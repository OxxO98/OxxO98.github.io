/*! For license information please see reactPlayerDash.4904246e.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkreact_youtube_translate_share=self.webpackChunkreact_youtube_translate_share||[]).push([[395],{398:(t,e,n)=>{n.r(e),n.d(e,{default:()=>E});var i=n(379),a=n(43),o=n(986),r=n(149),s=n(467),l=n(558),c=n(458),u=n(68),d=n(560);const h=["src"];var p=new WeakMap;class m extends((0,d.u6)(u.lB)){constructor(){super(...arguments),(0,r.A)(this,p,void 0)}attributeChangedCallback(t,e,n){"src"!==t&&super.attributeChangedCallback(t,e,n),"src"===t&&e!=n&&this.load()}async _initThumbnails(t){const{totalThumbnails:e,thumbnailDuration:n}=function(t){var e,n;const i=t.essentialProperties[0],[a,o]=i.value.split("x").map(Number),r=a*o,s=(null==(n=null==(e=t.adaptation)?void 0:e.period)?void 0:n.duration)||null,l=t.segmentDuration,c=t.timescale||1,u=l/c/r,d=null!=s?Math.ceil(s/u):Math.ceil(l/u);return{totalThumbnails:d,thumbnailDuration:u}}(t),i=await(async(e,n)=>{const i=[],a=t.timescale||1,o=t.startNumber||1,r=t.presentationTimeOffset?t.presentationTimeOffset/a:0,s=t.segmentDuration;for(let t=0;t<e;t++){const a=f({thIndex:t,thduration:n,ttiles:e,tduration:s,startNumber:o,pto:r}),l=a+n,c=new Promise((t,e)=>{this.api.provideThumbnail(a,n=>{let{url:i,width:o,height:r,x:s,y:c}=n;try{const e=new VTTCue(a,l,"".concat(i,"#xywh=").concat(s,",").concat(c,",").concat(o,",").concat(r));t(e)}catch(u){e(u)}})});i.push(c)}return await Promise.all(i).catch(t=>console.error("Error processing thumbnails",t))})(e,n);let a=this.nativeEl.querySelector('track[label="thumbnails"]');if(!a){a=function(){const t=document.createElement("track");return t.kind="metadata",t.label="thumbnails",t.srclang="en",t.mode="hidden",t.default=!0,t}(),this.nativeEl.appendChild(a);const t=function(t){let e="WEBVTT\n\n";for(const a of t)e+="".concat(i(a.startTime)," --\x3e ").concat(i(a.endTime),"\n"),e+="".concat(a.text,"\n\n");const n=new Blob([e],{type:"text/vtt"});return URL.createObjectURL(n);function i(t){const e=String(Math.floor(t/3600)).padStart(2,"0"),n=String(Math.floor(t%3600/60)).padStart(2,"0"),i=(t%60).toFixed(3).padStart(6,"0");return"".concat(e,":").concat(n,":").concat(i)}}(i);a.src=t,a.dispatchEvent(new Event("change"))}}async load(){if((0,c.A)(p,this))return void this.api.attachSource(this.src);(0,l.A)(p,this,!0);const t=await n.e(416).then(n.bind(n,416));this.api=t.MediaPlayer().create(),this.api.initialize(this.nativeEl,this.src,this.autoplay),this.api.on(t.MediaPlayer.events.STREAM_INITIALIZED,()=>{const t=this.api.getRepresentationsByType("video");let e=this.videoTracks.getTrackById("main");if(e||(e=this.addVideoTrack("main"),e.id="main",e.selected=!0),t.forEach(t=>{var n,i,a;const o=null!==(n=null!==(i=t.bandwidth)&&void 0!==i?i:t.bitrate)&&void 0!==n?n:Number.isFinite(t.bitrateInKbit)?1e3*t.bitrateInKbit:void 0;e.addRendition(t.id,t.width,t.height,null!==(a=t.mimeType)&&void 0!==a?a:t.codec,o).id=t.id}),this.videoRenditions.addEventListener("change",()=>{const t=this.videoRenditions[this.videoRenditions.selectedIndex];(null==t?void 0:t.id)?(this.api.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!1}}}}),this.api.setRepresentationForTypeById("video",t.id,!0)):this.api.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!0}}}})}),!this.api.isDynamic()){this.api.getRepresentationsByType("image").forEach(async(t,e)=>{e>0||this._initThumbnails(t)})}})}}function f(t){let{thIndex:e,tduration:n,thduration:i,ttiles:a,startNumber:o,pto:r}=t;return(Math.floor(e/a)+o-1)*n-r+(e%a+1-1)*i}(0,s.A)(m,"shadowRootOptions",(0,i.A)({},u.lB.shadowRootOptions)),(0,s.A)(m,"getTemplateHTML",t=>{const{src:e}=t,n=(0,o.A)(t,h);return u.lB.getTemplateHTML(n)}),globalThis.customElements&&!globalThis.customElements.get("dash-video")&&globalThis.customElements.define("dash-video",m);var v=m,b=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),y={className:"class",htmlFor:"for"};function g(t){return t.toLowerCase()}function T(t){return"boolean"===typeof t?t?"":void 0:"function"===typeof t||"object"===typeof t&&null!==t?void 0:t}function w(t,e,n){var i,a;t[e]=n,null==n&&e in(null!==(i=null==(a=globalThis.HTMLElement)?void 0:a.prototype)&&void 0!==i?i:{})&&t.removeAttribute(e)}var E=function(t){let{react:e,tagName:n,elementClass:a,events:o,displayName:r,defaultProps:s,toAttributeName:l=g,toAttributeValue:c=T}=t;const u=Number.parseInt(e.version)>=19,d=e.forwardRef((t,r)=>{var d,h;const p=e.useRef(null),m=e.useRef(new Map),f={},v={},g={},E={};for(const[e,n]of Object.entries(t)){var M,L;if(b.has(e)){g[e]=n;continue}const t=l(null!==(M=y[e])&&void 0!==M?M:e);if(a.prototype&&e in a.prototype&&!(e in(null!==(L=null==(d=globalThis.HTMLElement)?void 0:d.prototype)&&void 0!==L?L:{}))&&!(null==(h=a.observedAttributes)?void 0:h.some(e=>e===t))){E[e]=n;continue}if(e.startsWith("on")){f[e]=n;continue}const i=c(n);if(t&&null!=i&&(v[t]=String(i),u||(g[t]=i)),t&&u){const e=T(n);g[t]=i!==e?i:n}}if("undefined"!==typeof window){for(const t in f){var A;const n=f[t],i=t.endsWith("Capture"),a=(null!==(A=null==o?void 0:o[t])&&void 0!==A?A:t.slice(2).toLowerCase()).slice(0,i?-7:void 0);e.useLayoutEffect(()=>{const t=null==p?void 0:p.current;if(t&&"function"===typeof n)return t.addEventListener(a,n,i),()=>{t.removeEventListener(a,n,i)}},[null==p?void 0:p.current,n])}e.useLayoutEffect(()=>{if(null===p.current)return;const t=new Map;for(const e in E)w(p.current,e,E[e]),m.current.delete(e),t.set(e,E[e]);for(const[e,n]of m.current)w(p.current,e,void 0);m.current=t})}if("undefined"===typeof window&&(null==a?void 0:a.getTemplateHTML)&&(null==a?void 0:a.shadowRootOptions)){const{mode:n,delegatesFocus:i}=a.shadowRootOptions,o=e.createElement("template",{shadowrootmode:n,shadowrootdelegatesfocus:i,dangerouslySetInnerHTML:{__html:a.getTemplateHTML(v,t)}});g.children=[o,g.children]}return e.createElement(n,(0,i.A)((0,i.A)((0,i.A)({},s),g),{},{ref:e.useCallback(t=>{p.current=t,"function"===typeof r?r(t):null!==r&&(r.current=t)},[r])}))});return d.displayName=null!==r&&void 0!==r?r:a.name,d}({react:a,tagName:"dash-video",elementClass:v,toAttributeName:t=>"muted"===t?"":"defaultMuted"===t?"muted":g(t)})}}]);
//# sourceMappingURL=reactPlayerDash.4904246e.chunk.js.map